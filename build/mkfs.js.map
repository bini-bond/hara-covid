{"version":3,"sources":["../src/mkfs.js"],"names":["write_param","COLLNAME","obj","wordset","config","db","writeAdmin","start","salt","crypto","randomBytes","toString","hash","pbkdf2Sync","admin","email","profile","title","name","gender","role","token","params","collections"],"mappings":";;;qEASA;AAAA;AAAA;AAAA;AAAA;AAAA;AACQA,uBADR,GACsB;AAClBC,wBAAU,OADQ;AAElBC,mBAAKC;AAFa,aADtB;AAAA;AAAA,mBAMa,sBAAUC,gBAAV,CANb;;AAAA;AAMEC,cANF;AAAA;AAAA,mBASQC,YATR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,K;;;;;;sEAYf;AAAA;AAAA;AAAA;AAAA;AAAA;AACQC,gBADR,GACeC,iBAAOC,WAAP,CAAmB,EAAnB,EAAuBC,QAAvB,CAAgC,KAAhC,CADf;AAEQC,gBAFR,GAEeH,iBACVI,UADU,CACC,MADD,EACSL,IADT,EACe,KADf,EACsB,GADtB,EAC2B,QAD3B,EAEVG,QAFU,CAED,KAFC,CAFf;AAMQG,iBANR,GAMgB;AACZC,qBAAO,iBADK;AAEZC,uBAAS;AACPC,uBAAO,KADA;AAEPC,sBAAM,eAFC;AAGPC,wBAAQ;AAHD,eAFG;AAOZC,oBAAM,OAPM;AAQZC,qBAAO,EARK;AASZT,oBAAMA,IATM;AAUZJ,oBAAMA;AAVM,aANhB;AAmBQc,kBAnBR,GAmBiB;AACbrB,wBAAU,OADG;AAEbC,mBAAKY;AAFQ,aAnBjB;AAAA;AAAA,mBAuBQ,kBAAMT,EAAN,EAAUiB,MAAV,CAvBR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAehB,U;;;;;AArBf;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAMiB,cAAc,CAAC,OAAD,CAApB;;AAEA,IAAIlB,EAAJ;;AAwCAE","file":"mkfs.js","sourcesContent":["import { dbConnect, createCollections, write } from \"./mongo\";\nimport crypto from \"crypto\";\nimport config from \"./config/config\";\nimport wordset from \"./static/all.json\";\n\nconst collections = [\"words\"];\n\nvar db;\n\nasync function start() {\n  const write_param = {\n    COLLNAME: \"words\",\n    obj: wordset\n  };\n\n  db = await dbConnect(config);\n  // await createCollections(db, collections);\n  // await write(db, write_param);\n  await writeAdmin();\n}\n\nasync function writeAdmin() {\n  const salt = crypto.randomBytes(16).toString(\"hex\");\n  const hash = crypto\n    .pbkdf2Sync(\"root\", salt, 10000, 512, \"sha512\")\n    .toString(\"hex\");\n\n  const admin = {\n    email: \"admin@bokri.xyz\",\n    profile: {\n      title: \"Mr.\",\n      name: \"Samuel Girmai\",\n      gender: \"M\"\n    },\n    role: \"admin\",\n    token: [],\n    hash: hash,\n    salt: salt\n  };\n\n  const params = {\n    COLLNAME: \"users\",\n    obj: admin\n  };\n  await write(db, params);\n}\n\nstart();\n"]}