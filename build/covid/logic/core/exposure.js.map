{"version":3,"sources":["../../../../src/covid/logic/core/exposure.js"],"names":["uid","comment","User","findUser","profile","name","expoObj","Exposure","eid","diagnosisTS","moment","now","save","e","writeExposure","es","fetchExposures","readExposures"],"mappings":";;;;;;;;sEAKO;AAAA,QAA+BA,GAA/B,QAA+BA,GAA/B;AAAA,QAAoCC,OAApC,QAAoCA,OAApC;;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACqBC,eAAKC,QAAL,CAAcH,GAAd,CADrB;;AAAA;AAAA;AACGI,mBADH,SACGA,OADH;AAEGC,gBAFH,GAEYD,OAFZ,CAEGC,IAFH;AAGCC,mBAHD,GAGW,IAAIC,kBAAJ,CAAa;AAC3BC,mBAAK,wBAAY,EAAZ,CADsB;AAE3BR,sBAF2B;AAG3BK,wBAH2B;AAI3BJ,8BAJ2B;AAK3BQ,2BAAaC,iBAAOC,GAAP;AALc,aAAb,CAHX;AAAA;AAAA,mBAWWL,QAAQM,IAAR,EAXX;;AAAA;AAWCC,aAXD;;AAAA,gBAYAA,CAZA;AAAA;AAAA;AAAA;;AAAA,6CAaI,CAbJ;;AAAA;AAAA,6CAgBEA,CAhBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,a;;;;;;sEAoBf;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,cADD,GACMR,mBAASS,cAAT,EADN;;AAAA,gBAGAD,EAHA;AAAA;AAAA;AAAA;;AAAA,8CAII,CAJJ;;AAAA;AAAA,8CAOEA,EAPF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeE,a;;;;;AAzBtB;;;;AACA;;;;AACA;;;;AACA","file":"exposure.js","sourcesContent":["import moment from \"moment\";\nimport Exposure from '../../model/exposure';\nimport User from '../../model/user'\nimport { generate_id } from \"../../../utils/tools\";\n\nexport async function writeExposure({ uid, comment }) {\n  const { profile } = await User.findUser(uid);\n  const { name } = profile;\n  const expoObj = new Exposure({\n    eid: generate_id(10),\n    uid,\n    name,\n    comment,\n    diagnosisTS: moment.now()\n  });\n\n  const e = await expoObj.save();\n  if (!e) {\n    return 0;\n  }\n\n  return e;\n}\n\n\nexport async function readExposures() {\n  const es = Exposure.fetchExposures(); \n\n  if (!es) {\n    return 0;\n  }\n\n  return es;\n}"]}