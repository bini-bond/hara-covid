{"version":3,"sources":["../../../../src/covid/logic/core/contact.js"],"names":["contacts","mapped","map","cid","uid","firstTS","lastTS","medianDistance","cont","push","Contact","insertContacts","c","batchInsert","es","fetchContacts","readContacts"],"mappings":";;;;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;qEAGO,iBAA2BA,QAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AACDC,kBADC,GACQ,EADR;;AAELD,qBAASE,GAAT,CAAa,iBAAmD;AAAA,kBAAhDC,GAAgD,SAAhDA,GAAgD;AAAA,kBAA3CC,GAA2C,SAA3CA,GAA2C;AAAA,kBAAtCC,OAAsC,SAAtCA,OAAsC;AAAA,kBAA7BC,MAA6B,SAA7BA,MAA6B;AAAA,kBAArBC,cAAqB,SAArBA,cAAqB;;AAC9D,kBAAMC,OAAO;AACXL,wBADW;AAEXC,wBAFW;AAGXC,gCAHW;AAIXC,8BAJW;AAKXC;AALW,eAAb;;AAQAN,qBAAOQ,IAAP,CAAYD,IAAZ;AACD,aAVD;;AAFK;AAAA,mBAcWE,kBAAQC,cAAR,CAAuBV,MAAvB,CAdX;;AAAA;AAcCW,aAdD;;AAAA,gBAeAA,CAfA;AAAA;AAAA;AAAA;;AAAA,6CAgBI,CAhBJ;;AAAA;AAAA,6CAmBEA,CAnBF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeC,W;;;;;;sEAsBf;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,cADD,GACMJ,kBAAQK,aAAR,EADN;;AAAA,gBAGAD,EAHA;AAAA;AAAA;AAAA;;AAAA,8CAII,CAJJ;;AAAA;AAAA,8CAOEA,EAPF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;kBAAeE,Y;;;;;AA5CtB;;;;AACA;;;;AACA","file":"contact.js","sourcesContent":["import moment from \"moment\";\nimport Contact from \"../../model/contact\";\nimport { generate_id } from \"../../../utils/tools\";\n\n// export async function writeContact({ uid, firstTS, lastTS, medianDistance }) {\n//   const contObj = new Contact({\n//     cid: generate_id(10),\n//     uid,\n//     firstTS,\n//     lastTS,\n//     medianDistance,\n//   });\n\n//   const c = await contObj.save();\n//   if (!c) {\n//     return 0;\n//   }\n\n//   return c;\n// }\n\n\nexport async function batchInsert(contacts) {\n  let mapped = [];\n  contacts.map(({ cid, uid, firstTS, lastTS, medianDistance }) => {\n    const cont = {\n      cid,\n      uid,\n      firstTS,\n      lastTS,\n      medianDistance,\n    };\n\n    mapped.push(cont);\n  });\n  \n  const c = await Contact.insertContacts(mapped);\n  if (!c) {\n    return 0;\n  }\n\n  return c;\n}\n\nexport async function readContacts() {\n  const es = Contact.fetchContacts();\n\n  if (!es) {\n    return 0;\n  }\n\n  return es;\n}\n"]}